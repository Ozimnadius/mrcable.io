// common.js
function getNumber(str) {
    return parseInt(str.replace(/\s/g, ''));
}

function number_format(number, decimals, dec_point, thousands_sep) {
    var i, j, kw, kd, km;
    if (isNaN(decimals = Math.abs(decimals))) {
        decimals = 2;
    }
    if (dec_point == undefined) {
        dec_point = ",";
    }
    if (thousands_sep == undefined) {
        thousands_sep = ".";
    }
    i = parseInt(number = (+number || 0).toFixed(decimals)) + "";
    if ((j = i.length) > 3) {
        j = j % 3;
    } else {
        j = 0;
    }
    km = (j ? i.substr(0, j) + thousands_sep : "");
    kw = i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + thousands_sep);
    kd = (decimals ? dec_point + Math.abs(number - i).toFixed(decimals).replace(/-/, 0).slice(2) : "");
    return km + kw + kd;
}

function imageResize(src) {
    $('img').not('.logo__img').attr('src', src);
}
// imageResize('https://loremflickr.com/320/440');

const wWidth = $(window).width();

function getSuccess() {
    let template = $(tmpl.content),
        loader = template.find('.success').clone();
    return loader;
}

$.validator.methods.tel = function (value, element) {
    return validateTel(value);
};

function validateTel(value) {
    let re = new RegExp(/\d/g),
        str = value.match(re);

    if (str.length == 11) {
        return true;
    } else {
        return false;
    }
}

$('input[type=tel]').mask('+7 (999) 999-99-99');

const popup = $('.popup'),
    popupWrap = popup.find('.popup__wrapper');

function getForm(cls) {
    let template = $(tmpl.content),
        form = template.find(cls).clone();
    return form;
}

function openForm(form) {
    popupWrap.html(form);
    popup.addClass('active');
    $('body').addClass('ovh');
}

function closePopup() {
    popup.removeClass('active');
    $('body').removeClass('ovh');
}

function validateForm(form,rules) {
    form.validate({
        rules: rules,
        invalidHandler: function(event, validator) {
            $(this).find('.form__error').addClass('active');
        },
        submitHandler: function (form) {
            let data = $(form).serialize(),
                url = $(form).attr('action');

            $(form).find('.form__error').removeClass('active');

            $.ajax({
                dataType: "json",
                type: "POST",
                url: url,
                data: data,
                success: function (result) {
                    if (result.status) {
                        $(form).append(getSuccess());
                    } else {
                        alert('Что-то пошло не так, попробуйте еще раз!!!');
                    }
                },
                error: function (result) {
                    alert('Что-то пошло не так, попробуйте еще раз!!!');
                }
            });
        },
    });
    $('input[type=tel]').mask('+7 (999) 999-99-99');
}

//index.js
$(function () {

    let sliderSwiper = new Swiper('.islider__container', {
        loop: true,
        // If we need pagination
        pagination: {
            el: '.islider__pag',
        },

        // Navigation arrows
        navigation: {
            nextEl: '.islider__next',
            prevEl: '.islider__prev',
        },
    });

    var revsSwiper = new Swiper('.revs__container', {
        effect: 'coverflow',
        grabCursor: true,
        centeredSlides: true,
        slidesPerView: 'auto',
        initialSlide: 1,
        // Navigation arrows
        navigation: {
            nextEl: '.revs__next',
            prevEl: '.revs__prev',
        },
        pagination: {
            el: '.revs__pag',
        },


        coverflowEffect: {
            rotate: 0,
            stretch: 160,
            depth: 150,
            modifier: 3,
            slideShadows : false,
        },
    });

    $('.sw').on('click', function (e) {
        e.preventDefault();

        let $this = $(this),
            sws = $('.sw'),
            tabs = $('.tab'),
            tab = $(tabs[sws.index($this)]);

        sws.removeClass('active');
        tabs.removeClass('active');
        $this.addClass('active');
        tab.addClass('active');

    });
});
//popup.js
$(function () {

    //VARIABLES

    //EVENTS
    $('body').on('change','.accept__input', function (e) {
        let $this = $(this),
            form = $this.closest('form'),
            btn = form.find('[type=submit]');
        btn.toggleClass('disabled');
    });

    popup.on('click', function (e) {
        let target = $(e.target);

        if (target.closest('.popup__wrapper').length == 0 ){
            closePopup();
        }
    });

    $('body',).on('click','.jsFormClose',function (e) {
        e.preventDefault();
        closePopup();
    });

    //FUNCTIONS


    //VENDORS

});


//# sourceMappingURL=main.min.js.map